---
version: '3'
services:
  redis:
    image: "redis:latest"
    networks:
      - "scorify"

  web:
    build:
      context: ..
      dockerfile: "docker-files/dockerfile-web"
    image: "scorify-web:latest"
    ports:
      - "5000:5000"
    volumes:
      - "data:/data"
    networks:
      - "scorify"
    depends_on:
      - "redis"

  worker-split:
    build:
      context: ..
      dockerfile: "docker-files/dockerfile-worker-split"
    image: "scorify-worker-split:latest"
    volumes:
      - "data:/data"
    networks:
      - "scorify"
    depends_on:
      - "redis"

  worker-fft:
    build:
      context: ..
      dockerfile: "docker-files/dockerfile-worker-fft"
    image: "scorify-worker-fft:latest"
    volumes:
      - "data:/data"
    networks:
      - "scorify"
    depends_on:
      - "redis"

  worker-peak:
    build:
      context: ..
      dockerfile: "docker-files/dockerfile-worker-peak"
    image: "scorify-worker-peak:latest"
    volumes:
      - "data:/data"
    networks:
      - "scorify"
    depends_on:
      - "redis"

  worker-score:
    build:
      context: ..
      dockerfile: "docker-files/dockerfile-worker-score"
    image: "scorify-worker-score:latest"
    volumes:
      - "data:/data"
    networks:
      - "scorify"
    depends_on:
      - "redis"

networks:
  scorify:

volumes:
  data:
